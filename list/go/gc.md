# GC

GC 一般有两种大类，一种是标记清除式也叫追踪式的，另一种是引用计数式的。Go 语言使用的是标记清除式的垃圾回收器。

golang 的 GC 使用的是三色标记法，分为黑白灰三种颜色标记堆上的对象

* 白色对象（可能死亡）：未被回收器访问到的对象。在回收开始阶段，所有对象均为白色，当回收结束后，白色对象均不可达。
* 灰色对象（波面）：已被回收器访问到的对象，但回收器需要对其中的一个或多个指针进行扫描，因为他们可能还指向白色对象。
* 黑色对象（确定存活）：已被回收器访问到的对象，其中所有字段都已被扫描，黑色对象中任何一个指针都不可能直接指向白色对象。

GC 每次都会执行标记-清扫操作，刚开始运行的 GC 会将所有对象标记为白色，然后从根对象开始遍历，遍历到的对象会被标记为灰色，灰色对象表示其内部引用还没有被全部扫描，当一个对象已发现且其所有引用全部扫描完毕，就被认定为可达存活，就不会被回收。

### 触发时机
GC 的触发一般是在堆增长到触发阈值时会触发 GC，阈值是一个动态的值，会根据当前的堆使用情况来进行调整。
还有一种情况是程序员在代码中显式的调用 runtime.GC()
